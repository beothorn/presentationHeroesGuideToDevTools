<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>A hero's guide to developing with Chrome Dev Tools</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<link rel="stylesheet" href="css/bootstrap.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<style>

			p{
				font-family: Verdana,Geneva,sans-serif;
    			font-weight: bold;
			}

			#timer {
			  position: relative;
			  width: 100%;
			  height: 15px;
			  background-color: #000000
			}
			.input-group{
				padding: 5px;
				font-size: 20px;
			}
			#superSpeedForm{
				border: 9px solid #fff;
				background: #272822;
				padding: 15px;
			}
			#superVisionForm{
				margin-top: 20px;
				border: 9px solid #fff;
				background: #272822;
				padding: 15px;
			}
			#superStrengthForm{
				margin-top: 20px;
				border: 9px solid #fff;
				background: #272822;
				padding: 15px;
			}
			 #heroImg{
				 position: absolute;
				 width: 316px;
				 margin-top: -235px;
			 }
			 #metrologo{
			 	width: 282px;
			 }

			 #title-grid{
			 	display: grid;
			 	grid-template-columns: 0.1fr 1fr 1.9fr;
			 	grid-template-rows: 0.7fr 1fr 1.3fr;
			 	height: 15em;
			 }

			 #metro-logo-cell{
			 	grid-column-start: 1; 
    			grid-column-end: 4; 

    			justify-self: start;
			 }

			 #qrcode-cell{
			 	grid-column-start: 2; 
			 	grid-row-start: 2; 
    			grid-row-end: 4; 
			 }

			 #title-cell{
			 	grid-column-start: 3; 
				justify-self: start;
			 }

			 #autor-cell{
			 	grid-column-start: 3; 
			 	justify-self: end;
			 	font-size: 26px;
			 }
		</style>
	</head>
	<body data-presentation="true">
	<div id="timer"></div>
		<div class="reveal">
			<div class="slides">
				<section 
					data-name="title" 
					data-background-color="#333233"
				>
					<div id="title-grid">
						<div id="metro-logo-cell"><img id="metrologo" src="img/white_yellow.png" /></div>
						<div id="qrcode-cell"><img src="img/presentation.png" /></div>
						<div id="title-cell"><p>A hero's guide to developing with Chrome Dev Tools</p></div>
						<div id="autor-cell"><p>Lucas Santos</p></div>
					</div>
				</section>
				<section 
					data-name="introduction" 
					data-expected-duration="1m" 
					data-background-color="#254a27"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_green.png"
				>
					<p>Hi, I like to develop software</p>
				</section>
				<section 
					data-expected-duration="30s" 
					data-background-color="#1c1c4a"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_blue.png"
				>
					<p>Everything is fine when everything is fine</p>
				</section>
				<section 
					data-expected-duration="2m"
					data-background-color="#8e2c2c"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_red.png"
				>
					<p>The Evil bug</p>
				</section>
				<section
          			data-slide-name="heroSlide"
					data-expected-duration="2m"
					data-background-color="#612261"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_gray.png"
				>
					<p>When you are in a bad situation, who can help you</p>
				</section>
				<section
					data-expected-duration="5m"
					data-background-color="#222269"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_green.png"
				>
					<p>Things are in order</p>
					<p>As you fail you learn</p>
					<p>Obvious is powerful</p>
					<p>Small gains => big gain</p>
				</section>
				<section
					data-expected-duration="5m"
					data-background-color="#234444"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_green.png"
				>
					A familiar tool that is more powerful than you thought
				</section>
				<section
					data-expected-duration="10s" 
					data-background-color="#881d1d"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_red.png"
				>
					Surprise, we're in a browser
				</section>
				<section
					data-expected-duration="5m"
					data-background-color="#1c1c4a"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_blue.png"
				>
					<pre><code data-trim>
					manifest.json
					</code></pre>
					<pre><code data-trim>
					{
						"name": "Getting Started Example",
						"version": "1.0",
						"description": "Build an Extension!",
						"manifest_version": 2
						"content_scripts": [
							{
								"matches": ["yourUrl"], 
								"js": ["inject.js"]
							}
						],
						"permissions": ["yourUrl"],
					}
					</code></pre>
					<!--
						Dev tools is a powerfull REPL. It can render tables. It can render images.
						It can do requests using the fetch api
					-->
				</section>
				<section
					data-expected-duration="5m"
					data-background-image="img/flash.jpg"
				>
				</section>
				<section
					data-expected-duration="5m"
					data-background-image="img/flash_back.jpg"
				>
					
					<p><label for="basic-url">Some big form standig in your way</label><a id="superSpeedFill" style="margin-left: 30px" class="btn btn-primary btn-lg" role="button"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>Fill Form</a></p>
					
					<div id="superSpeedForm">
						<div class="input-group">
						  <span class="input-group-addon" id="basic-addon1">@</span>
						  <input id="superSpeedFormUsername" type="text" class="form-control" placeholder="Username" aria-describedby="basic-addon1">
						</div>

						<div class="input-group">
						  <input id="superSpeedFormEmail" type="text" class="form-control" placeholder="Contact email" aria-describedby="basic-addon2">
						  <span class="input-group-addon" id="basic-addon2">@example.com</span>
						</div>


						<div class="input-group">
						  <span class="input-group-addon" id="basic-addon3">Plan</span>
						  <input id="superSpeedFormPlan" type="text" class="form-control" id="basic-url" placeholder="Something" aria-describedby="basic-addon3">
						</div>
						<a style="margin-left: 30px" class="btn btn-primary btn-lg" role="button">Save</a>
					</div>
				</section>
				<section
					data-expected-duration="5m"
					data-background-image="img/superman.jpg"
				>
				</section>
				<section
					data-expected-duration="5m"
					data-background-image="img/superman_back.jpg"
				>
					Super-vision
					<a id="enableSuperVision" style="margin-left: 30px" class="btn btn-primary btn-lg" role="button"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>Enable superpowers</a>
					<div id="superVisionForm">
						<ul class="list-group">
						  <li class="list-group-item">
							<div class="btn-group" role="group" aria-label="...">
							  <button type="button" class="btn btn-default">Seller:</button>
							  <button type="button" class="btn btn-default">Dan</button>
							</div>
							<div class="btn-group" role="group" aria-label="...">
							  <button type="button" class="btn btn-default">Client list:</button>
							  <button type="button" class="btn btn-default">Alice, Bob, Carol</button>
							</div>
						  </li>
						</ul>
						<ul id="superVisionMetadata" style="display: none" class="list-group">
						  <li class="list-group-item">
							<div class="btn-group" role="group" aria-label="...">
							  <button type="button" class="btn btn-default">Present on last store report:</button>
							  <button type="button" class="btn btn-default">True</button>
							</div>
							<div class="btn-group" role="group" aria-label="...">
							  <button type="button" class="btn btn-default">Has apply discount permissions:</button>
							  <button type="button" class="btn btn-default">False</button>
							</div>
						  </li>
						</ul>
					</div>
				</section>
				<section
					data-expected-duration="5m"
					data-background-image="img/superman_back.jpg"
				>
					Super-vision
					<pre><code data-trim>
					await DEV.getSalesUntilDate("2019-02-02")
					  .then(cs => cs.map( c => c.articles ))
					  .then(as => as.flat())
					  .then(as => as.map( as => as.price ))
					  .then(ps => ps.reduce( (a, b) => a + b, 0 ) )
					</code></pre>
				</section>
				<section
					data-expected-duration="5m"
					data-background-image="img/hulk.jpg"
				>
				</section>
				<section
					data-expected-duration="5m"
					data-background-image="img/hulk_back.jpg"
				>
					Super-strength <a id="enableSuperStrength" style="margin-left: 30px" class="btn btn-primary btn-lg" role="button"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>Enable superpowers</a>
					<div id="superStrengthForm">
						<ul class="list-group">
						  <li class="list-group-item">
							<div class="btn-group" role="group" aria-label="...">
							  <button type="button" class="btn btn-default">Seller:</button>
							  <button type="button" class="btn btn-default">Dan</button>
							</div>
							<div class="btn-group" role="group" aria-label="...">
							  <button type="button" class="btn btn-default">Client list:</button>
							  <button id="clientList" type="button" style="color: gray" class="btn btn-default">Alice, Bob, Carol</button>
							  <button style="display: none" id="editClientList" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>Edit List</button>
							</div>
						  </li>
						</ul>
					</div>
				</section>
				</section>
				<section
					data-expected-duration="5m"
					data-background-image="img/hulk_back.jpg"
				>
					Super-strength
					<pre><code data-trim>
						DEV.addSaleToClient(clientName, article, price)
				    </code></pre>
				
				</section>
				<section
					data-expected-duration="2m"
					data-background-image="img/belt.jpg"
				>
					Just another tool on your toolbelt
				</section>
				<section
					data-expected-duration="2m"
					data-background-color="#1c1c4a"
					data-background-size="19px 33px"
					data-background-repeat="repeat"
					data-background-image="img/hexabump_red.png"
				>
					Share your power
				</section>
				<section
					data-expected-duration="2m"
					data-background-color="#333233"
				>
					<img width="600px" src="img/sourcecode.png" />
				</section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				controls: false,
				progress: false,
				transition: 'zoom',
				//backgroundTransition: 'none',
				hash: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				]
			});

			//This code adds a subtle (i hope so) line over the slides
			//when the expectedDuration is up, the line changes color
			const timeInMinutes = 35

			let startTime = 0
			let intervalId = -1
			const timer = document.getElementById("timer")

			Reveal.addEventListener( 'slidechanged', function( event ) {
				//console.log(event)
				if(event.currentSlide.dataset["expectedDuration"]){
					const expectedDurationStr = event.currentSlide.dataset["expectedDuration"]
					let expectedDuration = 0
					if(expectedDurationStr.endsWith("s")){
						expectedDuration = parseInt(expectedDurationStr.split("s")[0])
					} else{
						expectedDuration = parseInt(expectedDurationStr.split("m")[0]) * 60
					}
					timer.style.display = "block"
					timer.style.backgroundColor= "#000000"
					if(intervalId) clearInterval(intervalId)
					startTime = new Date().getTime();

					intervalId = setInterval(() => {
					   const now = new Date().getTime();
					   const timePassedInSeconds = Math.floor( (now - startTime) / 1000 );
					   if(timePassedInSeconds >= expectedDuration) timer.style.backgroundColor= "#aaaaaa"
				   }, 500);
				}else{
					timer.style.display = "none"
				}
			} );
			
			let expectedTotalTime = Array.from(document.querySelectorAll(".slides section"))
			  .map(s => s.dataset["expectedDuration"])
			  .filter(d => d != null)
			  .map(d => d.endsWith("s") ? parseInt(d.split("s")[0]) : parseInt(d.split("m")[0]) * 60)
			  .reduce((a,b) => a + b, 0)
			
			console.log(`Expected duration: ${expectedTotalTime/60} minutes`)
			//slide code, this part would be he extension part
			let superSpeedFill = document.getElementById("superSpeedFill")
			superSpeedFill.addEventListener("click", () =>{
				document.getElementById("superSpeedFormUsername").value = "Alice"
				document.getElementById("superSpeedFormEmail").value = "alice"
				document.getElementById("superSpeedFormPlan").value = "SuperDuperDiscountPlan"
				setTimeout(() => {
					document.getElementById("superSpeedForm").innerHTML = "You can continue now"
				}, 1000 )
			});

			let enableSuperVision = document.getElementById("enableSuperVision")
			enableSuperVision.addEventListener("click", () =>{
				document.getElementById("superVisionMetadata").style.display = "block"
			});

			let editClientList = document.getElementById("editClientList")
			editClientList.addEventListener("click", () =>{
				document.getElementById("clientList").contentEditable = true
				document.getElementById("clientList").spellcheck = false
				document.getElementById("clientList").style.color = "black"
			});

			let enableSuperStrength = document.getElementById("enableSuperStrength")
			enableSuperStrength.addEventListener("click", () =>{
				document.getElementById("editClientList").style.display = "block"
			});


			//Pretend this data comes from your rest api ;)
			let backendState = [
				{
					"client": "Alice",
					"articles": [
						{
							"name": "computer",
							"price": 1200
						},
						{
							"name": "mouse",
							"price": 10
						},
						{
							"name": "keyboard",
							"price": 30
						}
					]
				},
				{
					"client": "Bob",
					"articles": [
						{
							"name": "monitor",
							"price": 200
						},
						{
							"name": "chair",
							"price": 80
						}
					]
				},
				{
					"client": "Carol",
					"articles": [
						{
							"name": "monitor",
							"price": 200
						},
						{
							"name": "chair",
							"price": 80
						}
					]
				}
			]

			let DEV = {
				getSalesUntilDate : () => Promise.resolve(backendState),
				addSaleToClient : (clientName, articleName, price) => {
					let clientWithArticles = backendState.find(c => c.client == clientName)
					clientWithArticles.articles.push(
						{name: articleName, price}
					)
				},
				showArticlesForClient : (clientName) => {
					console.table(
						backendState.find(c => c.client == clientName).articles
					)
				},
				showWeekInSales : () => {
					let c = document.createElement("canvas")
					c.style.display = "none"
					c.width = 1000
					var ctx = c.getContext("2d");
					ctx.fillStyle = "white"
					ctx.fillRect(0, 0, 500, 500);
					ctx.moveTo(0, 100);
					ctx.lineTo(100, 50);
					ctx.stroke();
					ctx.lineTo(200, 100);
					ctx.stroke();
					ctx.lineTo(300, 30);
					ctx.stroke();
					ctx.lineTo(400, 10);
					ctx.stroke();
					let pngUrl = c.toDataURL();
					console.log("%c       ", `font-size: 100px; background: url(${pngUrl}) no-repeat`)
				}
			}

		</script>
	</body>
</html>
